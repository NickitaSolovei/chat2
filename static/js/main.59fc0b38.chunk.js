(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){e.exports={myClass:"main_myClass__3HCf2",height100:"main_height100__2rAaa",fullscreen:"main_fullscreen__ac_eV",headerClass:"main_headerClass__1OiAI",mainMessage:"main_mainMessage__26Vhd",messages:"main_messages__2hh1n",wrapmessages:"main_wrapmessages__2AxGa",headerMessages:"main_headerMessages__38NGU",messageBottom:"main_messageBottom__1Ab_Y",messageContainer:"main_messageContainer__2Ks6O",messageFirstLine:"main_messageFirstLine__3f4nf",messageFrom:"main_messageFrom__3oc_R",messageTime:"main_messageTime__EuRJ8",messageSecondLine:"main_messageSecondLine__22Ol-"}},14:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o});var a=n(3),s=function(e){return{type:a.a,payload:e}},r=function(e){return{type:a.c,paload:e}},o=function(e){return{type:a.b,paload:e}}},21:function(e,t,n){"use strict";(function(e){var a=n(9),s=n(10),r=n(12),o=n(11),i=n(13),c=n(0),m=n.n(c),u=n(6),l=n(14),f=n(23),g=n(1),p=n.n(g),d=function(t){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(o.a)(n).call(this,e))).getUserNameFromLocalStorage=function(){return localStorage.getItem("userName")},t.scrollToBottom=function(){t.messagesEnd.scrollIntoView()},t.inputRef=m.a.createRef(),t.userNameRef=m.a.createRef(),t}return Object(i.a)(n,t),Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.addEventListener("DOMContentLoaded",function(){Notification?"granted"!==Notification.permission&&Notification.requestPermission():alert("Desktop notifications not available in your browser. Try Chromium.")});!function n(){t.socket=new WebSocket("wss://wssproxy.herokuapp.com/"),t.props.onChatOnline(),e.SSS=t.socket,t.socket.onmessage=function(e){var n=e.data,a=JSON.parse(n);t.props.onChatMessagesReceived(a),function(e){"granted"!==Notification.permission?Notification.requestPermission():document.hidden&&new Notification(e.from,{body:e.message})}(a[a.length-1])},t.socket.onclose=function(){t.props.onChatOffline(),setTimeout(function(){n()},5e3)}}(),this.scrollToBottom()}},{key:"sendMessageToServer",value:function(){var e={message:this.inputRef.current.value,from:this.getUserNameFromLocalStorage()};this.socket.send(JSON.stringify(e))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:p.a.fullscreen},m.a.createElement(f.a,{className:p.a.headerClass,isOnline:this.props.chat.isChatOnline,getUserNameFromLocalStorage:this.getUserNameFromLocalStorage,userNameRef:this.userNameRef}),m.a.createElement("div",{className:p.a.wrapmessages},m.a.createElement("div",{className:p.a.messages,id:"messages"},m.a.createElement("div",{className:p.a.headerMessages},this.props.chat.messages.map(function(e){var t=new Date(e.time).toTimeString().replace(/ .*/,"");return m.a.createElement("div",{className:p.a.messageContainer},m.a.createElement("div",{className:p.a.messageFirstLine},m.a.createElement("div",{className:p.a.messageFrom},e.from),m.a.createElement("div",{className:p.a.messageTime},t)),m.a.createElement("div",{className:p.a.messageSecondLine},e.message))}),m.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))),m.a.createElement("input",{className:p.a.messageBottom,onKeyPress:function(t){"Enter"===t.key&&(e.sendMessageToServer(),e.inputRef.current.value="")},type:"text",ref:this.inputRef}))))}}]),n}(m.a.Component);t.a=Object(u.b)(function(e){return{chat:e.chat}},function(e){return{onChatMessagesReceived:function(t){return e(Object(l.a)(t))},onChatOnline:function(t){return e(Object(l.c)(t))},onChatOffline:function(t){return e(Object(l.b)(t))}}})(d)}).call(this,n(19))},23:function(e,t,n){"use strict";var a=n(9),s=n(10),r=n(12),o=n(11),i=n(13),c=n(0),m=n.n(c),u=n(6),l=function(e){var t=e.inputRef,n=e.onNameChange,a=e.isOnline;return m.a.createElement("div",{className:"header"},m.a.createElement("div",null,a?m.a.createElement("span",null,"***ONLINE***"):m.a.createElement("span",null,"***WARNING!! OFFLINE***    "),m.a.createElement("span",null,"YOUR NAME:"),m.a.createElement("input",{type:"text",onChange:function(){n()},ref:t})))},f=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).getNameFromLocalStorage=function(){var e=n.props.getUserNameFromLocalStorage();n.inputRef.current.value=e},n.onNameChange=function(){localStorage.setItem("userName",n.inputRef.current.value)},n.inputRef=m.a.createRef(),n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getNameFromLocalStorage()}},{key:"render",value:function(){return m.a.createElement(l,Object.assign({onNameChange:this.onNameChange,inputRef:this.inputRef},this.props))}}]),t}(c.Component);t.a=Object(u.b)(function(e){return{shared:e.shared}},function(){return{}})(f)},24:function(e,t,n){e.exports=n(34)},29:function(e,t,n){},3:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return r});var a="ON_CHAT_MESSAGES_RECEIVED",s="ON_CHAT_ONLINE",r="ON_CHAT_OFFLINE"},34:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(7),o=n.n(r),i=(n(29),n(6)),c=n(5),m=n(21);var u=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null))},l=n(22),f=n(3);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={messages:[],isChatOnline:!1};var h=Object(c.b)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a:var n=p({},e);return n.messages=n.messages.concat(t.payload.reverse()),n;case f.c:var a=p({},e);return a.messages=[],a.isChatOnline=!0,a;case f.b:var s=p({},e);return s.isChatOnline=!1,s;default:return e}}}),O=Object(c.c)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(s.a.createElement(i.a,{store:O},s.a.createElement(u,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.59fc0b38.chunk.js.map